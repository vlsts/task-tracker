<div class="buttons">
  <button mat-icon-button matTooltip="Toggle grid view" (click)="isList = !isList">
    <mat-icon>
      @if (isList) { grid_on }
      @else { grid_off }
    </mat-icon>
  </button>
  <button mat-icon-button matTooltip="Add new task" (click)="addTask()">
    <mat-icon>add</mat-icon>
  </button>
</div>

@if (isList) {
  <app-task-list [tasks]="tasks" (onDeleteTask)="deleteTask($event)"></app-task-list>
}
@else {
  <div class="task-columns">
    @for (status of statuses; track $index) {
      <div class="task-column">
        <h2>{{status.toString()}}</h2>
        <mat-progress-bar mode="determinate" value="{{computeTaskPercentage(status)}}"></mat-progress-bar>
        @for (task of tasks; track $index) {
          @if (task.status === status) {
            <app-task-card [task]="task" (onTaskEdit)="editTask($event)" (onDeleteTask)="deleteTask(task)" (onChangeTaskPriority)="changeTaskPriority($event.task, $event.newStatus)"></app-task-card>
          }
        }
      </div>
    }
  </div>
    <!-- <div class="task-column">
      <h2>To do</h2>
      @for (task of tasks; track $index) {
        @if (task.status.toString() == 'To do') {}
      }
      <div *ngFor="let task of tasks">
        <div *ngIf="task.status.toString() === 'To do'">
          <app-task-card [task]="task" (onDeleteTask)="deleteTask(task)"></app-task-card>
        </div>
      </div>
    </div>
    
    <div class="task-column">
      <h2>In progress</h2>
      <div *ngFor="let task of tasks">
        <div *ngIf="task.status.toString() === 'In progress'">
          <app-task-card [task]="task" (onDeleteTask)="deleteTask(task)"></app-task-card>
        </div>
      </div>
    </div>
  
    <div class="task-column">
      <h2>Done</h2>
      <div *ngFor="let task of tasks">
        <div *ngIf="task.status.toString() === 'Done'">
          <app-task-card [task]="task" (onDeleteTask)="deleteTask(task)"></app-task-card>
        </div>
      </div>
    </div> -->
}